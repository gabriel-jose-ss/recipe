{"ast":null,"code":"var _jsxFileName = \"/home/clecio/Trybe/Projetos/sd-029-b-project-recipes-app/src/components/FinishButton.jsx\",\n  _s = $RefreshSig$();\nimport { useHistory } from 'react-router-dom';\nimport PropTypes from 'prop-types';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction FinishButton(_ref) {\n  _s();\n  let {\n    isFinish,\n    recipe\n  } = _ref;\n  const history = useHistory();\n  const type = window.location.pathname.split('/')[1];\n  const idRecipe = type === 'meals' ? 'idMeal' : 'idDrink';\n  let storageRecipes = JSON.parse(localStorage.getItem('doneRecipes'));\n  if (storageRecipes === null) storageRecipes = [];\n  const today = new Date();\n  const isoString = today.toISOString();\n  function formatRecipe() {\n    const newRecipe = {\n      id: recipe[idRecipe],\n      type: type === 'meals' ? 'meal' : 'drink',\n      nationality: recipe.strArea || '',\n      category: recipe.strCategory || '',\n      alcoholicOrNot: recipe.strAlcoholic || '',\n      name: recipe.strDrink || recipe.strMeal,\n      image: recipe.strDrinkThumb || recipe.strMealThumb,\n      tags: recipe.strTags === null ? [] : recipe.strTags.split(','),\n      doneDate: isoString\n    };\n    return newRecipe;\n  }\n  function handleClick() {\n    const recipeToStorage = formatRecipe();\n    localStorage.setItem('doneRecipes', JSON.stringify([...storageRecipes, recipeToStorage]));\n    localStorage.removeItem('inProgressRecipes');\n    history.push('/done-recipes');\n  }\n  return /*#__PURE__*/_jsxDEV(\"button\", {\n    type: \"button\",\n    \"data-testid\": \"finish-recipe-btn\",\n    disabled: !isFinish,\n    onClick: handleClick,\n    className: \"start-btn\",\n    children: \"Finalizar\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 40,\n    columnNumber: 5\n  }, this);\n}\n_s(FinishButton, \"9cZfZ04734qoCGIctmKX7+sX6eU=\", false, function () {\n  return [useHistory];\n});\n_c = FinishButton;\nFinishButton.propTypes = {\n  isFinish: PropTypes.bool.isRequired,\n  recipe: PropTypes.shape({\n    idMeal: PropTypes.string,\n    idDrink: PropTypes.string,\n    strArea: PropTypes.string,\n    strCategory: PropTypes.string,\n    strAlcoholic: PropTypes.string,\n    strDrink: PropTypes.string,\n    strMeal: PropTypes.string,\n    strDrinkThumb: PropTypes.string,\n    strMealThumb: PropTypes.string,\n    strTags: PropTypes.string\n  }).isRequired\n};\nexport default FinishButton;\nvar _c;\n$RefreshReg$(_c, \"FinishButton\");","map":{"version":3,"names":["useHistory","PropTypes","FinishButton","isFinish","recipe","history","type","window","location","pathname","split","idRecipe","storageRecipes","JSON","parse","localStorage","getItem","today","Date","isoString","toISOString","formatRecipe","newRecipe","id","nationality","strArea","category","strCategory","alcoholicOrNot","strAlcoholic","name","strDrink","strMeal","image","strDrinkThumb","strMealThumb","tags","strTags","doneDate","handleClick","recipeToStorage","setItem","stringify","removeItem","push","propTypes","bool","isRequired","shape","idMeal","string","idDrink"],"sources":["/home/clecio/Trybe/Projetos/sd-029-b-project-recipes-app/src/components/FinishButton.jsx"],"sourcesContent":["import { useHistory } from 'react-router-dom';\nimport PropTypes from 'prop-types';\n\nfunction FinishButton({ isFinish, recipe }) {\n  const history = useHistory();\n  const type = window.location.pathname.split('/')[1];\n  const idRecipe = type === 'meals' ? 'idMeal' : 'idDrink';\n  let storageRecipes = JSON.parse(localStorage.getItem('doneRecipes'));\n  if (storageRecipes === null) storageRecipes = [];\n  const today = new Date();\n  const isoString = today.toISOString();\n\n  function formatRecipe() {\n    const newRecipe = {\n      id: recipe[idRecipe],\n      type: type === 'meals' ? 'meal' : 'drink',\n      nationality: recipe.strArea || '',\n      category: recipe.strCategory || '',\n      alcoholicOrNot: recipe.strAlcoholic || '',\n      name: recipe.strDrink || recipe.strMeal,\n      image: recipe.strDrinkThumb || recipe.strMealThumb,\n      tags: recipe.strTags === null ? [] : recipe.strTags.split(','),\n      doneDate: isoString,\n    };\n    return newRecipe;\n  }\n\n  function handleClick() {\n    const recipeToStorage = formatRecipe();\n    localStorage.setItem(\n      'doneRecipes',\n      JSON.stringify([...storageRecipes, recipeToStorage]),\n    );\n    localStorage.removeItem('inProgressRecipes');\n\n    history.push('/done-recipes');\n  }\n\n  return (\n    <button\n      type=\"button\"\n      data-testid=\"finish-recipe-btn\"\n      disabled={ !isFinish }\n      onClick={ handleClick }\n      className=\"start-btn\"\n    >\n      Finalizar\n    </button>\n  );\n}\n\nFinishButton.propTypes = {\n  isFinish: PropTypes.bool.isRequired,\n  recipe: PropTypes.shape({\n    idMeal: PropTypes.string,\n    idDrink: PropTypes.string,\n    strArea: PropTypes.string,\n    strCategory: PropTypes.string,\n    strAlcoholic: PropTypes.string,\n    strDrink: PropTypes.string,\n    strMeal: PropTypes.string,\n    strDrinkThumb: PropTypes.string,\n    strMealThumb: PropTypes.string,\n    strTags: PropTypes.string,\n  }).isRequired,\n};\n\nexport default FinishButton;\n"],"mappings":";;AAAA,SAASA,UAAU,QAAQ,kBAAkB;AAC7C,OAAOC,SAAS,MAAM,YAAY;AAAC;AAEnC,SAASC,YAAY,OAAuB;EAAA;EAAA,IAAtB;IAAEC,QAAQ;IAAEC;EAAO,CAAC;EACxC,MAAMC,OAAO,GAAGL,UAAU,EAAE;EAC5B,MAAMM,IAAI,GAAGC,MAAM,CAACC,QAAQ,CAACC,QAAQ,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;EACnD,MAAMC,QAAQ,GAAGL,IAAI,KAAK,OAAO,GAAG,QAAQ,GAAG,SAAS;EACxD,IAAIM,cAAc,GAAGC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,aAAa,CAAC,CAAC;EACpE,IAAIJ,cAAc,KAAK,IAAI,EAAEA,cAAc,GAAG,EAAE;EAChD,MAAMK,KAAK,GAAG,IAAIC,IAAI,EAAE;EACxB,MAAMC,SAAS,GAAGF,KAAK,CAACG,WAAW,EAAE;EAErC,SAASC,YAAY,GAAG;IACtB,MAAMC,SAAS,GAAG;MAChBC,EAAE,EAAEnB,MAAM,CAACO,QAAQ,CAAC;MACpBL,IAAI,EAAEA,IAAI,KAAK,OAAO,GAAG,MAAM,GAAG,OAAO;MACzCkB,WAAW,EAAEpB,MAAM,CAACqB,OAAO,IAAI,EAAE;MACjCC,QAAQ,EAAEtB,MAAM,CAACuB,WAAW,IAAI,EAAE;MAClCC,cAAc,EAAExB,MAAM,CAACyB,YAAY,IAAI,EAAE;MACzCC,IAAI,EAAE1B,MAAM,CAAC2B,QAAQ,IAAI3B,MAAM,CAAC4B,OAAO;MACvCC,KAAK,EAAE7B,MAAM,CAAC8B,aAAa,IAAI9B,MAAM,CAAC+B,YAAY;MAClDC,IAAI,EAAEhC,MAAM,CAACiC,OAAO,KAAK,IAAI,GAAG,EAAE,GAAGjC,MAAM,CAACiC,OAAO,CAAC3B,KAAK,CAAC,GAAG,CAAC;MAC9D4B,QAAQ,EAAEnB;IACZ,CAAC;IACD,OAAOG,SAAS;EAClB;EAEA,SAASiB,WAAW,GAAG;IACrB,MAAMC,eAAe,GAAGnB,YAAY,EAAE;IACtCN,YAAY,CAAC0B,OAAO,CAClB,aAAa,EACb5B,IAAI,CAAC6B,SAAS,CAAC,CAAC,GAAG9B,cAAc,EAAE4B,eAAe,CAAC,CAAC,CACrD;IACDzB,YAAY,CAAC4B,UAAU,CAAC,mBAAmB,CAAC;IAE5CtC,OAAO,CAACuC,IAAI,CAAC,eAAe,CAAC;EAC/B;EAEA,oBACE;IACE,IAAI,EAAC,QAAQ;IACb,eAAY,mBAAmB;IAC/B,QAAQ,EAAG,CAACzC,QAAU;IACtB,OAAO,EAAGoC,WAAa;IACvB,SAAS,EAAC,WAAW;IAAA,UACtB;EAED;IAAA;IAAA;IAAA;EAAA,QAAS;AAEb;AAAC,GA9CQrC,YAAY;EAAA,QACHF,UAAU;AAAA;AAAA,KADnBE,YAAY;AAgDrBA,YAAY,CAAC2C,SAAS,GAAG;EACvB1C,QAAQ,EAAEF,SAAS,CAAC6C,IAAI,CAACC,UAAU;EACnC3C,MAAM,EAAEH,SAAS,CAAC+C,KAAK,CAAC;IACtBC,MAAM,EAAEhD,SAAS,CAACiD,MAAM;IACxBC,OAAO,EAAElD,SAAS,CAACiD,MAAM;IACzBzB,OAAO,EAAExB,SAAS,CAACiD,MAAM;IACzBvB,WAAW,EAAE1B,SAAS,CAACiD,MAAM;IAC7BrB,YAAY,EAAE5B,SAAS,CAACiD,MAAM;IAC9BnB,QAAQ,EAAE9B,SAAS,CAACiD,MAAM;IAC1BlB,OAAO,EAAE/B,SAAS,CAACiD,MAAM;IACzBhB,aAAa,EAAEjC,SAAS,CAACiD,MAAM;IAC/Bf,YAAY,EAAElC,SAAS,CAACiD,MAAM;IAC9Bb,OAAO,EAAEpC,SAAS,CAACiD;EACrB,CAAC,CAAC,CAACH;AACL,CAAC;AAED,eAAe7C,YAAY;AAAC;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}